<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counter</title>
</head>
<body>

    <counter-element value="34"></counter-element>

    <script>
        class CounterElement extends HTMLElement {


            // getter estÃ¡tico para el attributeChangedCallback -> array de atributos
            static get observedAttributes() {
                return ['value'];
            }

            constructor() {
                super();
                // initial private value using setter
                this.value = 10;
            }

            // getter
            get value(){
                return this._value;
            }
            
            // setter
            set value(value){
                this._value = value;
                // update view DOM element
                this._updateViewValue();
            }

            // insert DOM
            connectedCallback() {
                // DOM value
                this.innerHTML = `
                    <button id="minus-button">&minus;</button>
                    <span id="value"></span>
                    <button id="plus-button">&plus;</button>`;
                
                // reference value DOM
                this.valueSpan = this.querySelector('#value');
                // init value DOM
                this._updateViewValue();

                // buttons listeners
                const munisButton = this.querySelector('#minus-button');
                munisButton.addEventListener('click', () => {
                    // use setter
                    this.value--;
                });
                const plusButton = this.querySelector('#plus-button');
                plusButton.addEventListener('click', () => {
                    // use setter
                    this.value++;
                })
            }

            attributeChangedCallback(name, oldValue, newValue) {
                // parse string to int using setter
                if(newValue) {
                    this.value = parseInt(newValue, 10);
                    this._updateViewValue();
                } else{ // not value attribute declared
                    this.value = 0;
                }
            }

            // display or not if valueSpan exists in dom
            _updateViewValue(){
                if(this.valueSpan) {
                    this.valueSpan.innerText = this._value;
                } 
            }

        }

        // unique declaration
        if(!customElements.get('counter-element')) {
            customElements.define('counter-element', CounterElement);
        }
    </script>
</body>
</html>